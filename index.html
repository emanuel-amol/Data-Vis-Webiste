<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Road Safety Enforcement in Australia</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/storytelling.css">
  <link rel="stylesheet" href="css/advanced-interactions.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <header>
    <div class="full-header">
      <div class="logo-container">
        <img src="images/logo.png" alt="Australian Government Logo" class="logo">
      </div>
      <h1 class="heading">Australian Road Safety Enforcement</h1>
    </div>
    
    <nav class="nav-container">
      <div class="container">
        <div class="nav-buttons">
          <a href="index.html" class="nav-btn active">Home</a>
          <a href="pages/time-trends.html" class="nav-btn">Time Trends</a>
          <a href="pages/jurisdictions.html" class="nav-btn">Jurisdictions</a>
          <a href="pages/age-analysis.html" class="nav-btn">Age Demographics</a>
          <a href="pages/insights.html" class="nav-btn">Key Insights</a>
          <a href="pages/about.html" class="nav-btn">About</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="hero">
      <div class="container">
        <h2>The Story of Road Safety Enforcement in Australia</h2>
        <div class="story-highlight animated-reveal">
          <div class="surprise-stat">
            <span class="big-number" id="middle-age-stat">2.8M+</span>
            <p>Total fines issued across Australia from 2008-2023, with <strong>middle-aged adults (40-64)</strong> receiving more road safety fines than any other age group, challenging the common perception that younger drivers are the primary offenders.</p>
          </div>
        </div>
        <p>Our comprehensive data visualization explores 15 years of road safety enforcement data (5,017 records) using interactive analytics to uncover patterns that can help improve safety strategies and save lives.</p>
      </div>
    </div>

    <div class="container">
      <!-- Enhanced Story Path with Interactive Elements -->
      <section class="overview">
        <h2>Follow the Data Journey</h2>
        
        <div class="interactive-story-path">
          <div class="story-timeline">
            <div class="timeline-line"></div>
            
            <div class="story-node active" data-step="1">
              <div class="node-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 3v18h18V3H3zm16 16H5V5h14v14zm-7-2l-4-4 1.41-1.41L12 14.17l6.59-6.58L20 9l-8 8z"/>
                </svg>
              </div>
              <div class="node-content">
                <h4>Time Trends</h4>
                <p>Discover how enforcement patterns evolved over 15 years</p>
                <div class="mini-insight">2021 Peak: 37% increase</div>
              </div>
            </div>
            
            <div class="story-node" data-step="2">
              <div class="node-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
              </div>
              <div class="node-content">
                <h4>Jurisdictional Patterns</h4>
                <p>Compare enforcement strategies across states</p>
                <div class="mini-insight">NSW: Dramatic mobile phone enforcement</div>
              </div>
            </div>
            
            <div class="story-node" data-step="3">
              <div class="node-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A2 2 0 0 0 18.09 7H16c-.8 0-1.54.5-1.84 1.24L12.5 12 15 22h5z"/>
                </svg>
              </div>
              <div class="node-content">
                <h4>Age Demographics</h4>
                <p>Uncover surprising patterns in age-related violations</p>
                <div class="mini-insight">40-64 group: Unexpected leaders</div>
              </div>
            </div>
            
            <div class="story-node" data-step="4">
              <div class="node-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
              </div>
              <div class="node-content">
                <h4>Comparative Analysis</h4>
                <p>Advanced statistical comparisons and correlations</p>
                <div class="mini-insight">Statistical significance testing</div>
              </div>
            </div>
            
            <div class="story-node" data-step="5">
              <div class="node-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19V1h-2v1H7V1H5v1H3.5C2.67 2 2 2.67 2 3.5v15c0 .83.67 1.5 1.5 1.5h17c.83 0 1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5zm0 16.5h-17v-11h17v11z"/>
                </svg>
              </div>
              <div class="node-content">
                <h4>Key Insights</h4>
                <p>Actionable recommendations for policy makers</p>
                <div class="mini-insight">Evidence-based solutions</div>
              </div>
            </div>
          </div>
        </div>
        
        <p class="story-description">
          Our data-driven narrative reveals surprising insights: middle-aged drivers account for the most violations, 
          enforcement technology dramatically impacts detection rates, and the 2021 peak represents a pivotal moment 
          in Australian road safety enforcement history.
        </p>
        
        <div class="cta-container">
          <a href="pages/time-trends.html" class="primary-cta">Begin the Data Journey</a>
        </div>
      </section>

      <!-- Enhanced Key Features with Data-Driven Previews -->
      <section class="features-section">
        <h2>Explore Our Data-Driven Analytics</h2>
        
        <div class="feature-grid">
          <div class="feature-card enhanced" data-feature="demographics">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A2 2 0 0 0 18.09 7H16c-.8 0-1.54.5-1.84 1.24L12.5 12 15 22h5z"/>
              </svg>
            </div>
            <h3>Age Demographics Analysis</h3>
            <p>Comprehensive analysis reveals that middle-aged adults (40-64) receive the most fines, contradicting common assumptions about young driver behavior.</p>
            <div class="feature-stats">
              <span class="feature-stat" id="age-stat-display">Loading...</span>
              <span class="feature-label">40-64 age group share</span>
            </div>
            <a href="pages/age-analysis.html" class="feature-link">Explore Demographics</a>
          </div>
          
          <div class="feature-card enhanced" data-feature="trends">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/>
              </svg>
            </div>
            <h3>Time Trends Analysis</h3>
            <p>Interactive time series analysis reveals dramatic enforcement growth, with a 37% spike in 2021 following COVID-19 restrictions.</p>
            <div class="feature-stats">
              <span class="feature-stat">37%</span>
              <span class="feature-label">2020 to 2021 increase</span>
            </div>
            <a href="pages/time-trends.html" class="feature-link">Explore Trends</a>
          </div>
          
          <div class="feature-card enhanced" data-feature="jurisdictions">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
            </div>
            <h3>Jurisdictional Analysis</h3>
            <p>Multi-dimensional geographic analysis reveals significant enforcement variations, with NSW and Victoria leading in total violations.</p>
            <div class="feature-stats">
              <span class="feature-stat">8</span>
              <span class="feature-label">jurisdictions analyzed</span>
            </div>
            <a href="pages/jurisdictions.html" class="feature-link">Explore Geography</a>
          </div>
        </div>
      </section>

      <!-- Data Quality and Methodology Section -->
      <section class="methodology-section">
        <h2>Data Quality & Methodology</h2>
        <div class="methodology-grid">
          <div class="method-card">
            <h4>Comprehensive Dataset</h4>
            <p>5,017 enforcement records spanning 15 years (2008-2023) across all Australian jurisdictions with detailed breakdowns by age, location, and detection method.</p>
          </div>
          <div class="method-card">
            <h4>Statistical Rigor</h4>
            <p>Confidence intervals, significance testing, and correlation analysis ensure reliable insights with quantified uncertainty.</p>
          </div>
          <div class="method-card">
            <h4>Interactive Exploration</h4>
            <p>Brushing, linking, and filtering enable deep exploration of patterns across multiple dimensions of the data.</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Data Source</h4>
          <p>Bureau of Infrastructure and Transport Research Economics (BITRE) - 5,017 records from 2008-2023</p>
        </div>
        <div class="footer-section">
          <h4>Last Updated</h4>
          <p>Dataset: September 2024<br>Analysis: December 2024</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Road Safety Enforcement Data Visualization - COS30045 Data Visualization</p>
      </div>
    </div>
  </footer>

  <!-- Load scripts in correct order -->
  <script src="js/utils/statistics.js"></script>
  <script src="js/utils/animations.js"></script>
  <script src="js/dataLoader.js"></script>
  <script src="js/previews/home-previews.js"></script>
  <script src="js/script.js"></script>
  
  <script>
    // Initialize statistics display when data loads
    document.addEventListener('roadSafetyDataReady', function(event) {
      const data = event.detail.data;
      
      // Update total fines statistic
      const totalFines = data.stats.totalFines;
      const totalFinesElement = document.getElementById('total-fines-stat');
      if (totalFinesElement) {
        AnimationUtils.animateCounter(totalFinesElement, totalFines, 2000);
      }
      
      // Update middle age statistic
      const middleAgeStat = document.getElementById('middle-age-stat');
      const ageGroupStat = document.getElementById('age-stat-display');
      
      if (data.processed && data.processed.byAgeGroup) {
        const middleAgeData = data.processed.byAgeGroup.find(d => d.ageGroup === '40-64');
        if (middleAgeData) {
          const percentage = ((middleAgeData.totalFines / totalFines) * 100).toFixed(1);
          
          if (middleAgeStat) {
            middleAgeStat.textContent = `${percentage}%`;
          }
          
          if (ageGroupStat) {
            ageGroupStat.textContent = `${percentage}%`;
          }
        }
      }
    });
  </script>
</body>
</html>